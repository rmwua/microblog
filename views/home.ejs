<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Author homepage</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-9ndCyUaIbzAi2FUVXJi0CjmCapSmO7SnpJef0486qhLnuZ2cdeRhO02iuK6FUUVM" crossorigin="anonymous">
        <style>
            a {
                color: inherit;
                color: green;
            }

            button {
                color: green;
            }
        </style>
    </head>
    <body>
        <div class="container-md">
        
        <p>Microblogger: Author Homepage</p>
        <a href="settings" style="color: green">settings</a>

        <!-- show blog information -->
        <div>
              <% blog_info.forEach(function(item){ %>

            <center>
                    <h1> <%= item.blog_title %> </h1>
                    <h2> <%= item.blog_subtitle %> </h2>
                    <h3> <%= item.author_name %> </h3>
            </center>
            <br>
            <br>
            <br>
            <% }) %>
        </div>

        <!-- Dynamic table with draft articles -->
        <h2>Draft Articles</h2>

        <table class="table table-hover">
            <thead>
              <tr>
                <th scope="col">Title</th>
                <th scope="col">Subtitle</th>
                <th scope="col">Created</th>
                <th scope="col">Last modified</th>
                <th scope="col">Actions</th>
              </tr>
            </thead>
            <tbody>
            <% draft_res.forEach(function(article){ %>

              <tr>
                <td> <%= article.title %> </td> 
                <td> <%= article.subtitle %> </td>
                <td> <%= article.created %> </td>
                <td> <%= article.last_modified %> </td>
                <td> 
                    <form action="edit/id=<%= article.article_id %>" method="get">
                        <a href="edit/id=<%= article.article_id %>"><button>Edit</button></a>
                    </form>
                    <form action="publish/id=<%= article.article_id %>" method="post"> 
                        <button>Publish</button>

                    </form>
                    <form action="delete/id=<%= article.article_id %>" method="post"> 
                        <button>Delete</button>
                    </form>
                </td>
              </tr>

            <% }) %>

          </table>
        
        <!-- create new article button -->

        <form action="create-new-article" method="get"> 
            <button type="button" class="btn btn-outline-success"><a href="create-new-article">create new draft</a></button>
        </form>

        <br>
        <br>

        <!-- Dynamic table with published articles -->
        <h2>Published Articles</h2>
            <table class="table table-hover">
                <thead>
                <tr>
                    <th scope="col">Title</th>
                    <th scope="col">Subtitle</th>
                    <th scope="col">Created</th>
                    <th scope="col">Published</th>
                    <th scope="col">Likes</th>
                    <th scope="col">Actions</th>
                </tr>
                </thead>

                <tbody>
            <% pub_res.forEach(function(article){ %>
                <tr>
                    
                    <td> <%= article.title %> </td> 
                    <td> <%= article.subtitle %> </td>
                    <td> <%= article.created %> </td>
                    <td> <%= article.published %> </td>
                    <td> <%= article.likes %> </td>
                    <td> 
                        <form action="share/id=<%= article.article_id %>" method="get">

                            <button>Share</button>
                        </form>

                        <form action="delete/id=<%= article.article_id %>" method="post"> 
                            <button>Delete</button>

                        </form>
                        </td>
                </tr>
            <% }) %>
            </table>

        </div>
    
    </body>
</html>


